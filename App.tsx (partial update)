// Handle logout
const handleLogout = async () => {
  try {
    console.log('Logging out...');
    setIsLoading(true); // Show loading indicator during logout
    
    // Clear any stored user data
    try {
      // Keep the onboarding status but clear user-specific data
      // This way the user won't have to go through onboarding again
      await AsyncStorage.removeItem('user_display_name');
      console.log('Cleared user data from AsyncStorage');
    } catch (storageError) {
      console.error('Error clearing user data:', storageError);
    }
    
    // Sign out from Supabase
    await signOut();
    console.log('Logout successful, updating UI');
    
    // Reset state and navigate to login
    setUserName('');
    setAppState('login');
  } catch (error) {
    console.error('Error signing out:', error);
    Alert.alert(
      'Sign Out Error',
      'There was a problem signing out. Please try again.',
      [{ text: 'OK' }]
    );
  } finally {
    setIsLoading(false);
  }
};